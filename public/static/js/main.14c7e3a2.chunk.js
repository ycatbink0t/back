(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{103:function(e,t,a){e.exports=a(136)},108:function(e,t,a){},109:function(e,t,a){},136:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),i=(a(108),a(18)),u=(a(109),a(36)),l=a(34),s=a(89),m=a(187),p=a(169),f=a(8),d=a.n(f),b=a(17),h=a(183),g=a(178),E=a(179),v=a(180),w=a(182),O=a(24),j=a.n(O),y=a(86),x=a.n(y),k=a(181),S=a(87),T=a.n(S),C=new Headers({"Content-Type":"application/json",Accept:"application/json"});function I(e,t,a){return N.apply(this,arguments)}function N(){return(N=Object(b.a)(d.a.mark((function e(t,a,n){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={body:JSON.stringify(n),headers:C,method:a},e.next=3,fetch(""+t,r);case 3:return c=e.sent,e.next=6,c.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return D.apply(this,arguments)}function D(){return(D=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I("/sign-in","POST",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return U.apply(this,arguments)}function U(){return(U=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I("/sign-up","POST",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I("/me","GET"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return J.apply(this,arguments)}function J(){return(J=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I("/comment","GET"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return K.apply(this,arguments)}function K(){return(K=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I("/logout","POST"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=a(171),G=a(175),H=a(174),V=a(170),A=a(172),M=a(173),Y=a(140),$=j()({table:{}});var z=function(e){var t=e.comments,a=$();return r.a.createElement(V.a,{component:Y.a},r.a.createElement(F.a,{className:a.table},r.a.createElement(A.a,null,r.a.createElement(M.a,null,r.a.createElement(H.a,null,"ID"),r.a.createElement(H.a,{align:"left"},"Name"),r.a.createElement(H.a,{align:"left"},"Surname"),r.a.createElement(H.a,{align:"left"},"Comment"))),r.a.createElement(G.a,null,t.map((function(e){return r.a.createElement(M.a,{key:e.id},r.a.createElement(H.a,null,e.id),r.a.createElement(H.a,{align:"left"},e.name),r.a.createElement(H.a,{align:"left"},e.surname),r.a.createElement(H.a,{align:"left"},e.comment))})))))},Q=a(177),R=a(176);var X=function(){return r.a.createElement(R.a,{container:!0,direction:"row",justify:"center"},r.a.createElement(Q.a,null))},Z=a(67),_=a.n(Z),ee=a(186),te=j()((function(e){return{modal:{margin:"auto",marginTop:"30%",maxWidth:"650px",padding:e.spacing(2,4,3)}}}));var ae=function(e){var t=e.open,a=e.onClose,n=te();return r.a.createElement(ee.a,{open:t,onClose:a},r.a.createElement(Y.a,{className:n.modal},r.a.createElement(g.a,{align:"center",variant:"h5"},"Help"),r.a.createElement(g.a,null,"To add comments into table make POST request to address `/comment` with JSON body:","{","apiKey, comment: ","{","name, surname, comment","}","}")))},ne=_()(x.a)({color:"#ffffff"}),re=_()(T.a)({color:"#ffffff"}),ce=j()((function(e){return{toolbar:{display:"flex",justifyContent:"space-between"},apikey:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));var oe=function(e){e.children;var t=e.user,a=e.setIsLoggedIn,c=ce(),o=Object(l.g)(),u=Object(n.useState)(),s=Object(i.a)(u,2),m=s[0],p=s[1],f=Object(n.useState)(!1),O=Object(i.a)(f,2),j=O[0],y=O[1];function x(){return(x=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:return a(!1),e.abrupt("return",o.push("/sign-in"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return T.apply(this,arguments)}function T(){return(T=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:t=e.sent,p(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){S()}),[]),r.a.createElement("div",null,r.a.createElement(ae,{open:j,onClose:function(){return y(!1)}}),r.a.createElement(E.a,{position:"static"},r.a.createElement(v.a,{className:c.toolbar},r.a.createElement(g.a,{variant:"h6",display:"block"},"ElComments"),r.a.createElement("div",null,r.a.createElement(k.a,{onClick:function(){return y(!0)}},r.a.createElement(re,null)),r.a.createElement(k.a,{onClick:function(){p(void 0),S()}},r.a.createElement(ne,null)),r.a.createElement(w.a,{color:"inherit",onClick:function(){return x.apply(this,arguments)}},"Logout")))),r.a.createElement(h.a,null,r.a.createElement(g.a,{variant:"h6",align:"center",className:c.apikey},"Your api key: ",(null===t||void 0===t?void 0:t.apiKey)||"No api key provided"),m?r.a.createElement(z,{comments:m}):r.a.createElement(X,null)))},ie=a(23),ue=a(184),le=a(185),se=j()((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},form:{marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},link:{color:e.palette.primary.light,textDecoration:"none","&:hover, &:focus":{textDecoration:"underline"}}}}));var me=function(e){var t=e.setUser,a=e.setLoggedIn,c=se(),o=Object(n.useState)(""),l=Object(i.a)(o,2),s=l[0],m=l[1],p=Object(n.useState)(""),f=Object(i.a)(p,2),E=f[0],v=f[1],O=Object(n.useState)({}),j=Object(i.a)(O,2),y=j[0],x=j[1];function k(e){return x(Object(ie.a)({},y,{password:!1})),v(e),!1}function S(e){return x(Object(ie.a)({},y,{username:!1})),m(e),!1}function T(){return(T=Object(b.a)(d.a.mark((function e(n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!S(s)&&!k(E)){e.next=6;break}return console.log(y),e.abrupt("return");case 6:return e.prev=6,e.next=9,W({username:s,password:E});case 9:r=e.sent,t(Object(ie.a)({},r)),a(!0),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),console.error(e.t0),alert("Invalid username or password");case 18:case"end":return e.stop()}}),e,null,[[6,14]])})))).apply(this,arguments)}return r.a.createElement(h.a,{maxWidth:"xs"},r.a.createElement(ue.a,null),r.a.createElement("div",null,r.a.createElement(Y.a,{elevation:3,className:c.paper},r.a.createElement(g.a,{component:"h1",variant:"h5",align:"center"},"Sign in"),r.a.createElement("form",{noValidate:!0,onSubmit:function(e){return T.apply(this,arguments)}},r.a.createElement(le.a,{error:!!y.username,onInput:function(e){return S(e.target.value)},helperText:y.username,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0}),r.a.createElement(le.a,{error:!!y.password,onChange:function(e){return k(e.target.value)},helperText:y.password,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(w.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:c.submit},"Sign In"),r.a.createElement(R.a,{container:!0},r.a.createElement(R.a,{item:!0},r.a.createElement(u.b,{to:"/sign-up",className:c.link},"Don't have an account? Sign Up")))))))},pe=a(90);var fe=function(e){var t=e.allowed,a=e.redirectTo,n=e.children,c=Object(pe.a)(e,["allowed","redirectTo","children"]);return t?r.a.createElement(l.b,c,n):r.a.createElement(l.a,{to:a})},de=j()((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},form:{marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var be=function(){var e=de(),t=Object(l.g)(),a=Object(n.useState)(""),c=Object(i.a)(a,2),o=c[0],u=c[1],s=Object(n.useState)(""),m=Object(i.a)(s,2),p=m[0],f=m[1],E=Object(n.useState)({}),v=Object(i.a)(E,2),O=v[0],j=v[1];function y(e){return e.length<8?(j(Object(ie.a)({},O,{password:"Password should contain at least 8 symbols"})),!0):(j(Object(ie.a)({},O,{password:!1})),f(e),!1)}function x(e){return e.length<5?(j(Object(ie.a)({},O,{username:"Username should contain at least 5 symbols"})),!0):(j(Object(ie.a)({},O,{username:!1})),u(e),!1)}function k(){return(k=Object(b.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!x(o)&&!y(p)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,P({username:o,password:p});case 7:if((n=e.sent).errors&&("password"===n.errors.field&&j(Object(ie.a)({},O,{password:n.errors.message})),"username"===n.errors.field&&j(Object(ie.a)({},O,{username:n.errors.message}))),!n.user){e.next=11;break}return e.abrupt("return",t.push("/sign-in"));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(h.a,{maxWidth:"xs"},r.a.createElement(ue.a,null),r.a.createElement("div",null,r.a.createElement(Y.a,{elevation:3,className:e.paper},r.a.createElement(g.a,{component:"h1",variant:"h5",align:"center"},"Sign up"),r.a.createElement("form",{noValidate:!0,onSubmit:function(e){return k.apply(this,arguments)}},r.a.createElement(le.a,{error:!!O.username,onInput:function(e){return x(e.target.value)},helperText:O.username,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0}),r.a.createElement(le.a,{error:!!O.password,onChange:function(e){return y(e.target.value)},helperText:O.password,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(w.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign Up")))))},he=Object(s.a)({palette:{primary:{main:"#3d5afe",light:"#8187ff",dark:"#0031ca"},secondary:{main:"#ffeb3b",light:"#ffff72",dark:"#c8b900"}}});he=Object(m.a)(he);var ge=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(),s=Object(i.a)(o,2),m=s[0],f=s[1];return Object(n.useEffect)((function(){(function(){return q.apply(this,arguments)})().then((function(e){(null===e||void 0===e?void 0:e.username)?(f(e),c(!0)):f({username:"",apiKey:""})}))}),[]),r.a.createElement(p.a,{theme:he},m?r.a.createElement(u.a,null,r.a.createElement(l.d,null,r.a.createElement(fe,{path:"/sign-in",allowed:!a,redirectTo:"/"},r.a.createElement(me,{setUser:f,setLoggedIn:c})),r.a.createElement(fe,{allowed:!a,redirectTo:"/",path:"/sign-up"},r.a.createElement(be,null)),r.a.createElement(fe,{allowed:a,redirectTo:"/sign-in",path:"/"},r.a.createElement(oe,{user:m,setIsLoggedIn:c})))):r.a.createElement(X,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[103,1,2]]]);
//# sourceMappingURL=main.14c7e3a2.chunk.js.map